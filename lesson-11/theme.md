# üéØ –¢–µ–º–∞ 11 - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö—É–∫ useEffect()

> üí° –í —ç—Ç–æ–π —Ç–µ–º–µ –î–∏–º—ã—á —Ä–∞–∑–æ–±—Ä–∞–ª —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç: –∫–∞–∫ React —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —á—Ç–æ —Ç–∞–∫–æ–µ Mount/Update —Ä–µ–∂–∏–º—ã, –∑–∞—á–µ–º –Ω—É–∂–µ–Ω FiberNode, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, –ø–æ—á–µ–º—É useEffect() –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞, —á—Ç–æ —Ç–∞–∫–æ–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –ø–æ—á–µ–º—É –±–µ–∑ –Ω–∏—Ö –±—ã–≤–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä.

---

## üìò –ö–∞–∫ React —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–æ–±—â–∞—è –∫–∞—Ä—Ç–∏–Ω–∞)

–≠—Ç–æ —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ ‚Äî –ø–æ–Ω—è—Ç—å –∫–æ–≥–¥–∞ –∏ –ø–æ—á–µ–º—É –≤—ã–∑—ã–≤–∞—é—Ç—Å—è —Ç–≤–æ–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

React –ø—Ä–æ—Ö–æ–¥–∏—Ç 2 —Ñ–∞–∑—ã:

- Render Phase (–≤—ã—á–∏—Å–ª–µ–Ω–∏–µ)
- Commit Phase (–ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ DOM)

–ò –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≤—è–∑–∞–Ω –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ FiberNode.

---

## üìò FiberNode ‚Äî –∫–∞–∫ React –ø–æ–Ω–∏–º–∞–µ—Ç —á—Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å

–ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Üí —ç—Ç–æ FiberNode.

Fiber —Ö—Ä–∞–Ω–∏—Ç:

- —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- props
- —Å—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ—Ç–æ–º–∫–æ–≤
- —Ç–∏–ø –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- —Ñ–ª–∞–≥–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

> –¢–æ –µ—Å—Ç—å Fiber ‚Äî —ç—Ç–æ ¬´—Ä–∞–±–æ—á–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞¬ª, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è React –≤—ã–±—Ä–∞—Ç—å —á—Ç–æ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å, –∞ —á—Ç–æ —Ç—Ä–æ–≥–∞—Ç—å –Ω–µ –Ω–∞–¥–æ.

---

## üìò Mount Mode ‚Äî –ø–µ—Ä–≤—ã–π —Ä–µ–Ω–¥–µ—Ä

–ö–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–ø–µ—Ä–≤—ã–µ.

React –¥–µ–ª–∞–µ—Ç:

- —Å–æ–∑–¥–∞—ë—Ç FiberNode
- —Å—Ç—Ä–æ–∏—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –¥–µ—Ä–µ–≤–æ
- –Ω–µ—á–µ–≥–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å ‚Üí –≤—Å—ë —Ä–∏—Å—É–µ—Ç –≤ DOM
- –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã (useEffect())

> üìå –≠—Ç–æ –≤–∞–∂–Ω–æ: —ç—Ñ—Ñ–µ–∫—Ç—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞, —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ DOM –æ–±–Ω–æ–≤–∏–ª—Å—è.

---

## üìò Update Mode ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä

–ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ state –∏–ª–∏ props.

–ü—Ä–æ—Ü–µ—Å—Å —Ç–∞–∫–æ–π:

- React –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤–æ–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –¥–µ—Ä–µ–≤–æ
- Fiber —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç ¬´–Ω–æ–≤—ã–π¬ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–æ ¬´—Å—Ç–∞—Ä—ã–º¬ª
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∫—É—Å–æ—á–∫–∏ DOM
- –ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã

---

## üìò –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç `useEffect()`

useEffect() ‚Äî —ç—Ç–æ ¬´–ø–æ–±–æ—á–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç –ø–æ—Å–ª–µ DOM –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è¬ª.

–¢–æ –µ—Å—Ç—å:

- React —Ä–∏—Å—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ø–æ—Ç–æ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã

–§–æ—Ä–º—É–ª–∞:

- –Ω–µ—Ç –º–∞—Å—Å–∏–≤–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚Üí —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∞
- –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ [] ‚Üí —ç—Ñ—Ñ–µ–∫—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–Ω–¥–µ—Ä–µ
- deps –µ—Å—Ç—å ‚Üí —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

---

## üìò –ü–æ—á–µ–º—É –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä?

–ü—Ä–∏–º–µ—Ä:

```javascript
useEffect(() => {
  setCount(count + 1);
});
```

–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

- –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è
- —ç—Ñ—Ñ–µ–∫—Ç –º–µ–Ω—è–µ—Ç state
- state –≤—ã–∑—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–π —Ä–µ–Ω–¥–µ—Ä
- —Ä–µ–Ω–¥–µ—Ä ‚Üí —ç—Ñ—Ñ–µ–∫—Ç ‚Üí setState ‚Üí —Ä–µ–Ω–¥–µ—Ä

—Ü–∏–∫–ª –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π

---

## üìò –°–∞–º—ã–π —á–∞—Å—Ç—ã–π —é–∑-–∫–µ–π—Å useEffect ‚Äî –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–î–∏–º—ã—á –ø–æ–∫–∞–∑–∞–ª –∏–¥–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

- –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
- –º—ã –¥–µ–ª–∞–µ–º fetch
- —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ state
- React –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç

---

## üìò –ö–æ–¥, –∫–æ—Ç–æ—Ä—ã–π —è –Ω–∞–ø–∏—Å–∞–ª –ø–æ —Ç–µ–º–µ (—Å —É–ª—É—á—à–µ–Ω–∏—è–º–∏)

```javascript
import { useEffect, useState } from "react";

function App() {
  const apiKey = "aFigTebe";
  const [selectedTrackId, setSelectedTrackId] = useState(null);
  const [tracks, setTracks] = useState(null);

  useEffect(() => {
    try {
      const savedTracks = JSON.parse(localStorage.getItem("tracks"));

      if (Array.isArray(savedTracks)) {
        setTracks(savedTracks);
        return;
      }
    } catch (e) {}

    const fetchTracks = async () => {
      const response = await fetch(
        "https://musicfun.it-incubator.app/api/1.0/playlists/tracks",
        {
          method: "GET",
          headers: {
            "API-KEY": apiKey,
          },
        }
      );

      const data = await response.json();
      const fetchedTracks = data.data;

      localStorage.setItem("tracks", JSON.stringify(fetchedTracks));
      setTracks(fetchedTracks);
    };

    fetchTracks();
  }, []);

  if (!tracks) return <p>Loading...</p>;
  if (tracks.length === 0) return <p>No tracks found.</p>;

  return (
    <div>
      <h1>Musicfun Player</h1>
      <button onClick={() => setSelectedTrackId(null)}>Reset selection</button>

      <ul>
        {tracks.map((track) => (
          <li
            key={track.id}
            style={{
              border:
                track.id === selectedTrackId ? "1px solid orange" : "none",
            }}
          >
            {track.attributes.images.main[2] && (
              <img
                width={50}
                height={50}
                src={track.attributes.images.main[2].url}
                alt={track.attributes.title}
                style={{ objectFit: "cover" }}
              />
            )}

            <div onClick={() => setSelectedTrackId(track.id)}>
              {track.attributes.title}
            </div>

            <audio src={track.attributes.attachments[0].url} controls />
          </li>
        ))}
      </ul>
    </div>
  );
}

export default App;
```

---

## üìò –ì–ª–∞–≤–Ω–æ–µ –∏–∑ —Ç–µ–º—ã

- React —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç ‚Üí –ø–æ—Ç–æ–º –æ–±–Ω–æ–≤–ª—è–µ—Ç DOM ‚Üí –ø–æ—Ç–æ–º –∑–∞–ø—É—Å–∫–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç—ã.
- Mount Mode ‚Äî –ø–µ—Ä–≤–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
- Update Mode ‚Äî –≤—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
- Fiber –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á—Ç–æ–±—ã —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å —á—Ç–æ –ø–æ–º–µ–Ω—è–ª–æ—Å—å.
- useEffect() –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞ DOM.
- –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ ‚Äî —ç—Ç–æ –º–æ–∑–≥ —ç—Ñ—Ñ–µ–∫—Ç–∞.
- –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä = —ç—Ñ—Ñ–µ–∫—Ç –º–µ–Ω—è–µ—Ç state –±–µ–∑ deps.

---

## üôè –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –î–∏–º—ã—á—É (IT-KAMASUTRA)

> > üí° –°–ø–∞—Å–∏–±–æ —Ç–µ–±–µ, –î–∏–º—ã—á, –∑–∞ —Ç—Ä—É–¥, –∑–∞ –∏—Å–∫—Ä–µ–Ω–Ω–æ—Å—Ç—å –∏ –∑–∞ —Ç–æ, —á—Ç–æ —Ç—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —É—á–∏—à—å React, –∞ –¥–∞—ë—à—å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî –∫–∞–∫ –º—ã—Å–ª–∏—Ç—å, –∫–∞–∫ —Ä–∞—Å—Ç–∏ –∏ –Ω–µ –±–æ—è—Ç—å—Å—è –Ω–æ–≤–æ–≥–æ. –≠—Ç–æ—Ç –∫—É—Ä—Å –Ω–µ –ø—Ä–æ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –∞ –ø—Ä–æ –ø—É—Ç—å. –ò –∫–∞–∂–¥—ã–π, –∫—Ç–æ –ø—Ä–æ–π–¥—ë—Ç –µ–≥–æ —Å –æ—Ç–∫—Ä—ã—Ç–æ–π –≥–æ–ª–æ–≤–æ–π, –≤—ã–π–¥–µ—Ç –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–º, –∞ —Å–∞–º—É—Ä–∞–µ–º, –≥–æ—Ç–æ–≤—ã–º –∫ —Ä–µ–∞–ª—å–Ω–æ–º—É –º–∏—Ä—É.
